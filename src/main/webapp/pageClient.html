<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>PAGE CLIENT : MINI PROJET</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
            <script>
                $(document).ready(// Exécuté à la fin du chargement de la page
                    function () {
                        // On montre la liste des codes
                        showCommandes();
                    }
                );
                var test;
                function showCommandes(){
                    $.ajax({
                        url: "ServletControleur",
                        dataType: "json",
                        data: {"action": "pageClient"},
                        //error: showError,
                        success: // La fonction qui traite les résultats
                                function (result) {
                                    console.log(result);
                                    var html = "<tr>"
                                                    +"<th>Numero de commande</th>"
                                                    +"<th>Numero de produit</th>"
                                                    +"<th>Quantitée</th>"
                                                    +"<th>Date de vente</th>"
                                                    +"<th>Prix de livraison</th>"
                                                    +"<th>Date d'envoie</th>"
                                                    +"<th colspan='2'>Action</th>"
                                                +"</tr>";
                                        console.log(result.length)
                                    for(i = 0; i<result.length; i++){
                                        html += "<tr id='com"+result[i].orderNum+"'>"
                                                    +"<td>"+ result[i].orderNum +"</td>"
                                                    +"<td>"+ result[i].productId +"</td>"
                                                    +"<td>"+ result[i].quantity +"</td>"
                                                    +"<td>"+ result[i].salesDate +"</td>"
                                                    +"<td>"+ result[i].shippingCost +"</td>"
                                                    +"<td>"+ result[i].shippingDate +"</td>"
                                                    +"<td> <button type='button' onclick='modifCommande();'>Modifier</button> </td>"
                                                    +"<td> <button type='button' onclick='suppCommande();'>Supprimer</button> </td>"
                                                +"</tr>";
                                    }
                                    $('#tabCom').html(html)
                                }
                    });
                }
                
                
                function suppCommande(){
                    console.log("supp");
                }
                
                
                function modifCommande(){
                    console.log("modif");
                }
                
                
                function addCommande(){
                    $.ajax({
                        url: "ServletControleur",
                        dataType: "json",
                        data: $("#ajoutCom").serialize(),
                        //error: showError,
                        success: // La fonction qui traite les résultats
                                function (result) {
                                    showCommandes
                                }
                    });
                }
            </script>
    </head>
    <body>
        <form id='ajoutCom' onsubmit='addCommande();'>
            <label>Product ID   </label><input type="text" name="productId"/><br/>
            <label>Quantity   </label><input type="number" step='1' name="quantity"/><br/>
            <label>Prix de livraison   </label><input type="number" step='0.01' name="shippingCost"/>€<br/>
            <label>Date de vente   </label><input type="date" name="salesDate"/><br/>
            <label>Date d'envoi   </label><input type="date" name="shippingDate"/><br/>
            <label>Compagnie de livraison   </label><input type="text" name="freightCompany"/><br/>
   
            <input name="action" type="submit" value="Ajout"/>
        </form>
        <table id='tabCom'>
        </table>
    </body>
</html>
